<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Terminal Helper - Convertly</title>
    <meta name="description" content="Translate natural language into safe shell commands with risk analysis.">
    <link rel="stylesheet" href="../../style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Fira+Code:wght@400;500&display=swap"
        rel="stylesheet">
    <style>
        .terminal-window {
            background: #1e1e1e;
            border-radius: 12px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            font-family: 'Fira Code', monospace;
            border: 1px solid #333;
        }

        .terminal-header {
            background: #2d2d2d;
            padding: 10px 15px;
            display: flex;
            gap: 8px;
            border-bottom: 1px solid #333;
        }

        .dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .red {
            background: #ff5f56;
        }

        .yellow {
            background: #ffbd2e;
        }

        .green {
            background: #27c93f;
        }

        .terminal-body {
            padding: 2rem;
            color: #d4d4d4;
        }

        .risk-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 4px;
            font-weight: 700;
            font-size: 0.8rem;
            text-transform: uppercase;
            margin-bottom: 1rem;
        }

        .risk-LOW {
            background: rgba(39, 201, 63, 0.2);
            color: #27c93f;
            border: 1px solid #27c93f;
        }

        .risk-MEDIUM {
            background: rgba(255, 189, 46, 0.2);
            color: #ffbd2e;
            border: 1px solid #ffbd2e;
        }

        .risk-HIGH {
            background: rgba(255, 95, 86, 0.2);
            color: #ff5f56;
            border: 1px solid #ff5f56;
        }

        .risk-CRITICAL {
            background: #ff0000;
            color: white;
            border: 1px solid #ff0000;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                opacity: 1;
            }

            50% {
                opacity: 0.7;
            }

            100% {
                opacity: 1;
            }
        }

        .command-output {
            background: #000;
            padding: 1.5rem;
            border-radius: 8px;
            font-size: 1.1rem;
            color: #fff;
            margin-bottom: 1.5rem;
            border-left: 4px solid transparent;
        }

        .border-LOW {
            border-left-color: #27c93f;
        }

        .border-MEDIUM {
            border-left-color: #ffbd2e;
        }

        .border-HIGH {
            border-left-color: #ff5f56;
        }
    </style>
</head>

<body>
    <div class="bg-blobs">
        <div class="blob blob-1"></div>
        <div class="blob blob-3" style="top: 80%; right: 10%;"></div>
    </div>

    <!-- Navigation -->
    <nav>
        <div class="logo">
            <a href="../../index.html"
                style="text-decoration: none; color: inherit; display: flex; align-items: center; gap: 10px;">
                <div class="logo-icon"><i class="fas fa-layer-group"></i></div>
                <span>CONVERTLY</span>
            </a>
        </div>
        <div class="nav-links">
            <a href="../../index.html" class="nav-btn">Uploads</a>
            <a href="../../dashboard.html" class="nav-btn active" style="background: rgba(15, 23, 42, 0.05);">AI Tools
                <i class="fas fa-magic"></i></a>
        </div>
    </nav>

    <div class="dashboard-layout">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h3>Media Tools</h3>
            </div>
            <a href="../../dashboard.html" class="tool-nav-btn"><i class="fas fa-th-large"></i> Dashboard</a>
            <a href="../mp3-extractor/index.html" class="tool-nav-btn"><i class="fas fa-music"></i> MP3 Extractor</a>
            <a href="../youtube-summary/index.html" class="tool-nav-btn"><i class="fab fa-youtube"></i> YouTube
                Summary</a>
            <a href="../audio-translator/index.html" class="tool-nav-btn"><i class="fas fa-language"></i> Audio
                Translator</a>
            <a href="../image-resizer/index.html" class="tool-nav-btn"><i class="fas fa-crop-alt"></i> Auto Resizer</a>

            <div class="sidebar-header" style="margin-top: 1rem;">
                <h3>Utility Tools</h3>
            </div>
            <a href="../privacy-redactor/index.html" class="tool-nav-btn"><i class="fas fa-user-secret"></i> Privacy
                Redactor</a>
            <a href="../site-cloner/index.html" class="tool-nav-btn"><i class="fas fa-clone"></i> Site Cloner</a>
            <a href="../code-commenter/index.html" class="tool-nav-btn"><i class="fas fa-code"></i> Code Commenter</a>
            <a href="../terminal-helper/index.html" class="tool-nav-btn active"><i class="fas fa-terminal"></i> Terminal
                Helper</a>
        </aside>

        <!-- Main Content -->
        <main class="dashboard-content">
            <div class="tool-header">
                <h1>Terminal Helper</h1>
                <p>Translate natural language into safe shell commands.</p>
            </div>

            <div class="active-tool-container">
                <div class="tool-content" style="max-width: 800px; margin: 0 auto;">

                    <!-- Controls -->
                    <div style="display: flex; gap: 1rem; margin-bottom: 2rem;">
                        <input type="text" id="nl-input" placeholder="e.g., 'delete the logs folder' or 'list files'"
                            style="flex: 1; padding: 1rem; border-radius: 0.5rem; border: 1px solid var(--border); background: var(--glass-bg); font-size: 1.1rem;">

                        <select id="os-select" onchange="updateOS()"
                            style="padding: 0 1rem; border-radius: 0.5rem; border: 1px solid var(--border); background: var(--bg-white);">
                            <option value="unix">MacOS / Linux (Bash)</option>
                            <option value="windows">Windows (PowerShell)</option>
                        </select>

                        <button class="primary-btn" onclick="processCommand()">Translate</button>
                    </div>

                    <!-- Terminal Output -->
                    <div class="terminal-window" id="terminal-display" style="display: none;">
                        <div class="terminal-header">
                            <div class="dot red"></div>
                            <div class="dot yellow"></div>
                            <div class="dot green"></div>
                        </div>
                        <div class="terminal-body">
                            <!-- Risk Badge -->
                            <div id="risk-badge" class="risk-badge risk-LOW">LOW RISK</div>

                            <!-- Command -->
                            <div id="cmd-output-box" class="command-output border-LOW">
                                <span style="color: #6a9955;">$</span> <span id="cmd-text">ls -la</span>
                            </div>

                            <!-- Explanation -->
                            <p id="cmd-explanation" style="margin-bottom: 1.5rem; color: #a0a0a0; font-style: italic;">
                                Lists all files in the current directory including hidden ones.
                            </p>

                            <!-- Warning -->
                            <div id="cmd-warning"
                                style="display: none; background: rgba(255, 0, 0, 0.1); border: 1px solid red; color: #ff5f56; padding: 1rem; border-radius: 6px; margin-bottom: 1.5rem;">
                                <i class="fas fa-exclamation-triangle"></i> <b id="warning-text">CRITICAL WARNING</b>
                            </div>

                            <!-- Actions -->
                            <div style="display: flex; gap: 1rem;">
                                <button class="secondary-btn" onclick="copyCmd()"
                                    style="background: rgba(255,255,255,0.1); color: white; border: none;">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                                <button class="primary-btn" id="exec-btn"
                                    onclick="alert('Execute not safe in browser!')"
                                    style="background: #27c93f; border: none;">
                                    <i class="fas fa-play"></i> Execute
                                </button>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </main>
    </div>

    <script src="../../TerminalHelper.js"></script>
    <script>
        function updateOS() {
            const os = document.getElementById('os-select').value;
            if (window.TerminalHelper) {
                window.TerminalHelper.setOS(os);
                // Re-process if input exists
                if (document.getElementById('nl-input').value) processCommand();
            }
        }

        function processCommand() {
            const input = document.getElementById('nl-input').value;
            if (!input.trim()) return;

            const helper = window.TerminalHelper;
            const translation = helper.translate(input);
            const safety = helper.analyzeSafety(translation.command);

            // Display
            document.getElementById('terminal-display').style.display = 'block';

            // Text
            document.getElementById('cmd-text').innerText = translation.command;
            document.getElementById('cmd-explanation').innerText = translation.description;

            // Risk Styling
            const badge = document.getElementById('risk-badge');
            const box = document.getElementById('cmd-output-box');

            // Remove old classes
            badge.className = 'risk-badge';
            box.className = 'command-output';

            // Add new classes
            badge.classList.add(`risk-${translation.risk}`);
            box.classList.add(`border-${translation.risk}`);
            badge.innerText = `${translation.risk} RISK`;

            // Safety Checks
            const warningBox = document.getElementById('cmd-warning');
            const execBtn = document.getElementById('exec-btn');

            if (!safety.safe) {
                warningBox.style.display = 'block';
                document.getElementById('warning-text').innerText = safety.warning;
                execBtn.disabled = true;
                execBtn.style.opacity = '0.5';
                execBtn.style.cursor = 'not-allowed';

                // Override Badge for Critical
                badge.className = 'risk-badge risk-CRITICAL';
                badge.innerText = 'CRITICAL STOP';
            } else {
                warningBox.style.display = 'none';
                execBtn.disabled = false;
                execBtn.style.opacity = '1';
                execBtn.style.cursor = 'pointer';
            }
        }

        function copyCmd() {
            const text = document.getElementById('cmd-text').innerText;
            navigator.clipboard.writeText(text);
        }

        // Enter key support
        document.getElementById('nl-input').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') processCommand();
        });
    </script>
</body>

</html>